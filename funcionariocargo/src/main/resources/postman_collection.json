{
	"info": {
		"_postman_id": "prova-jwt-api",
		"name": "Prova JWT API Collection",
		"description": "Complete API collection for testing all endpoints in the correct sequence",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8081",
			"type": "string"
		},
		{
			"key": "jwtToken",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "1. Setup (Public Endpoints)",
			"item": [
				{
					"name": "Create Default Roles",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/roles/role-setup",
							"host": ["{{baseUrl}}"],
							"path": ["roles", "role-setup"]
						},
						"description": "Create default USER and ADMIN roles (no auth required)"
					},
					"response": []
				},
				{
					"name": "Create Default Users",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/usuarios/criar-usuarios-default",
							"host": ["{{baseUrl}}"],
							"path": ["usuarios", "criar-usuarios-default"]
						},
						"description": "Create default users (admin/admin and user/user) - only works if no users exist"
					},
					"response": []
				},
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"admin\",\n  \"password\": \"admin\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["auth", "login"]
						},
						"description": "Login to get JWT token"
					},
					"response": []
				}
			]
		},
		{
			"name": "2. Roles (ADMIN only)",
			"item": [
				{
					"name": "List All Roles",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/roles?page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["roles"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Get all roles with pagination"
					},
					"response": []
				},
				{
					"name": "Get Role by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/roles/1",
							"host": ["{{baseUrl}}"],
							"path": ["roles", "1"]
						},
						"description": "Get role by ID"
					},
					"response": []
				},
				{
					"name": "Create New Role",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"descricao\": \"MANAGER\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/roles",
							"host": ["{{baseUrl}}"],
							"path": ["roles"]
						},
						"description": "Create a new role"
					},
					"response": []
				},
				{
					"name": "Update Role",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"descricao\": \"SUPERVISOR\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/roles/3",
							"host": ["{{baseUrl}}"],
							"path": ["roles", "3"]
						},
						"description": "Update role by ID"
					},
					"response": []
				},
				{
					"name": "Filter Roles",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/roles/filtro?descricao=ADMIN&page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["roles", "filtro"],
							"query": [
								{
									"key": "descricao",
									"value": "ADMIN"
								},
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Filter roles by description"
					},
					"response": []
				},
				{
					"name": "Delete Role",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/roles/3",
							"host": ["{{baseUrl}}"],
							"path": ["roles", "3"]
						},
						"description": "Delete role by ID"
					},
					"response": []
				}
			]
		},
		{
			"name": "3. Users (ADMIN only)",
			"item": [
				{
					"name": "Create User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"testuser\",\n  \"password\": \"password123\",\n  \"roles\": [\"USER\"]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/usuarios",
							"host": ["{{baseUrl}}"],
							"path": ["usuarios"]
						},
						"description": "Create a new user"
					},
					"response": []
				},
				{
					"name": "List All Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/usuarios?page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["usuarios"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Get all users with pagination"
					},
					"response": []
				},
				{
					"name": "Get User by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/usuarios/1",
							"host": ["{{baseUrl}}"],
							"path": ["usuarios", "1"]
						},
						"description": "Get user by ID (requires ADMIN or own user)"
					},
					"response": []
				},
				{
					"name": "Update User",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"updateduser\",\n  \"password\": \"newpassword123\",\n  \"roles\": [\"USER\"]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/usuarios/1",
							"host": ["{{baseUrl}}"],
							"path": ["usuarios", "1"]
						},
						"description": "Update user by ID (requires ADMIN or own user)"
					},
					"response": []
				},
				{
					"name": "Filter Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/usuarios/filtro?username=admin&role=ADMIN&page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["usuarios", "filtro"],
							"query": [
								{
									"key": "username",
									"value": "admin"
								},
								{
									"key": "role",
									"value": "ADMIN"
								},
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Filter users by username and role"
					},
					"response": []
				},
				{
					"name": "Delete User",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/usuarios/2",
							"host": ["{{baseUrl}}"],
							"path": ["usuarios", "2"]
						},
						"description": "Delete user by ID"
					},
					"response": []
				}
			]
		},
		{
			"name": "4. Cargos (ADMIN only)",
			"item": [
				{
					"name": "Create Cargo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nome\": \"Desenvolvedor\",\n  \"salario\": 5000.00\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/cargos",
							"host": ["{{baseUrl}}"],
							"path": ["cargos"]
						},
						"description": "Create a new cargo"
					},
					"response": []
				},
				{
					"name": "List All Cargos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/cargos?page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["cargos"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Get all cargos with pagination"
					},
					"response": []
				},
				{
					"name": "Get Cargo by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/cargos/1",
							"host": ["{{baseUrl}}"],
							"path": ["cargos", "1"]
						},
						"description": "Get cargo by ID"
					},
					"response": []
				},
				{
					"name": "Update Cargo",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nome\": \"Desenvolvedor Senior\",\n  \"salario\": 7000.00\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/cargos/1",
							"host": ["{{baseUrl}}"],
							"path": ["cargos", "1"]
						},
						"description": "Update cargo by ID"
					},
					"response": []
				},
				{
					"name": "Filter Cargos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/cargos/filtro?nome=Desenvolvedor&salarioMin=4000&salarioMax=8000&page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["cargos", "filtro"],
							"query": [
								{
									"key": "nome",
									"value": "Desenvolvedor"
								},
								{
									"key": "salarioMin",
									"value": "4000"
								},
								{
									"key": "salarioMax",
									"value": "8000"
								},
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Filter cargos by name and salary range"
					},
					"response": []
				},
				{
					"name": "Delete Cargo",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/cargos/1",
							"host": ["{{baseUrl}}"],
							"path": ["cargos", "1"]
						},
						"description": "Delete cargo by ID"
					},
					"response": []
				}
			]
		},
		{
			"name": "5. Funcionarios (USER/ADMIN for GET, ADMIN for others)",
			"item": [
				{
					"name": "Create Funcionario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nome\": \"Jo達o Silva\",\n  \"cargo\": {\n    \"id\": 1,\n    \"nome\": \"Desenvolvedor\",\n    \"salario\": 5000.00\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/funcionarios",
							"host": ["{{baseUrl}}"],
							"path": ["funcionarios"]
						},
						"description": "Create a new funcionario (ADMIN only)"
					},
					"response": []
				},
				{
					"name": "List All Funcionarios",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/funcionarios?page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["funcionarios"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Get all funcionarios with pagination (USER/ADMIN)"
					},
					"response": []
				},
				{
					"name": "Get Funcionario by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/funcionarios/1",
							"host": ["{{baseUrl}}"],
							"path": ["funcionarios", "1"]
						},
						"description": "Get funcionario by ID (USER/ADMIN)"
					},
					"response": []
				},
				{
					"name": "Update Funcionario",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nome\": \"Jo達o Silva Santos\",\n  \"cargo\": {\n    \"id\": 1,\n    \"nome\": \"Desenvolvedor Senior\",\n    \"salario\": 7000.00\n  }\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/funcionarios/1",
							"host": ["{{baseUrl}}"],
							"path": ["funcionarios", "1"]
						},
						"description": "Update funcionario by ID (ADMIN only)"
					},
					"response": []
				},
				{
					"name": "Filter Funcionarios",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/funcionarios/filtro?nome=Jo達o&nomecargo=Desenvolvedor&salarioMin=4000&salarioMax=8000&page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["funcionarios", "filtro"],
							"query": [
								{
									"key": "nome",
									"value": "Jo達o"
								},
								{
									"key": "nomecargo",
									"value": "Desenvolvedor"
								},
								{
									"key": "salarioMin",
									"value": "4000"
								},
								{
									"key": "salarioMax",
									"value": "8000"
								},
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "Filter funcionarios by name, cargo name, and salary range (USER/ADMIN)"
					},
					"response": []
				},
				{
					"name": "Delete Funcionario",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwtToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/funcionarios/1",
							"host": ["{{baseUrl}}"],
							"path": ["funcionarios", "1"]
						},
						"description": "Delete funcionario by ID (ADMIN only)"
					},
					"response": []
				}
			]
		}
	]
}
